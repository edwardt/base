# system reactors

reactor _R_func_call {
  getarg              # put event arg to stack top
  pushs "funarg"      # get "funarg" value of "arg map"
  getf
  getarg              # put event arg again to stack top
  pushs "name"        # get "name" value of "arg map"
  getf
  call_func           # call the function
}

reactor _R_func_call_ret {
  getarg
  pushs "funarg"
  getf
  getarg
  pushs "name"
  getf
  call_func
  getarg
  pushs "retid"
  getf
  getarg
  pushs "retaddr"
  getf
  call_return         # initiate return sequence (REPLY)
}

reactor _R_prop_get {
  getarg
  pushs "name"
  getf
  prop_get
  getarg
  pushs "retaddr"
  getf
  getarg
  pushs "retid"
  getf
  call_return        # initial return sequence (REPLY)
}

reactor _R_prop_set {
  getarg
  pushs "value"
  getf
  getarg
  pushs "prop"
  getf
  prop_set
}

reactor _R_reply {
  getarg
  pushs "retval"
  getf
  getarg
  pushs "retid"
  getf
  call_continue
}

#reactor func_ret_reactor {
# getarg
# getf "retval" 
# getarg
# getf "retid" 
# call_continue retid
#}
